{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?e3a9","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?7f95","webpack:///./src/components/Main.vue?7fe4","webpack:///./src/Engine.js","webpack:///src/components/Main.vue","webpack:///./src/components/Main.vue?27d4","webpack:///./src/components/Main.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/components/Main.vue?dfb4"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","script","component","staticClass","state","stateKind","WELCOME","_v","shareUrl","shareTitle","on","$event","startDemo","_e","INIT","_s","progressMessage","WORKING","stopDemo","ERROR","reload","showFatalError","fatalError","MODEL_URL","OBJECT_SIZE","padSize","size","padTo","makeInput","image","maxSize","sizeX","shape","sizeY","scaleX","scaleY","scale","Math","floor","tf","resizeBilinear","padX","padY","Localizer","logger","maxInputSize","onProgress","url","console","log","loadGraphModel","fraction","progress","round","model","input","output","executeAsync","outputArray","objects","x","y","angle","objectSize","logException","Engine","initDone","features","set","localizer","init","imageTensor","fromPixels","predict","gtag","isMobile","tempResultPicture","camera","isVideoReady","isVideoShown","isDetecting","isHandIconOn","handIconTime","Date","HAND_ICON_OFF_INTERVAL","computed","methods","location","startVideo","detectionTask","onVideoReady","onVideoError","error","message","href","created","test","navigator","userAgent","$gtag","event","isActive","engine","mounted","beforeDestroy","EXIT","updated","watch","$route","to","sleep","ms","Promise","components","Main","library","add","faVk","faFacebook","faTwitter","Vue","FontAwesomeIcon","use","BootstrapVue","IconsPlugin","FormInputPlugin","VueRouter","VueSocialSharing","routes","path","Home","router","base","process","config","productionTip","VueGtag","id","render","h","App","$mount"],"mappings":"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","file":"js/app.b738b53c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/localizer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('keep-alive',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4ac9c7b0&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('Main',{attrs:{\"msg\":\"Object Localization With Orientation\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[(_vm.state === _vm.stateKind.WELCOME)?[_c('h1',[_vm._v(\"Hand Detector\")]),_c('h4',[_vm._v(\"Localizer demo app\")]),_c('div',{staticClass:\"social-share\"},[_c('ShareNetwork',{attrs:{\"network\":\"Facebook\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle()}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('font-awesome-icon',{attrs:{\"icon\":['fab', 'facebook'],\"size\":\"lg\"}})],1)],1),_c('ShareNetwork',{attrs:{\"network\":\"Twitter\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle()}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('font-awesome-icon',{attrs:{\"icon\":['fab', 'twitter'],\"size\":\"lg\"}})],1)],1),_c('ShareNetwork',{attrs:{\"network\":\"VK\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle()}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('font-awesome-icon',{attrs:{\"icon\":['fab', 'vk'],\"size\":\"lg\"}})],1)],1),_c('ShareNetwork',{attrs:{\"network\":\"Email\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle(),\"description\":\"Check out the localizer demo app.\"}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('b-icon',{attrs:{\"icon\":\"envelope\"}})],1)],1)],1),_c('div',{staticClass:\"youtube-super-container\"},[_c('div',{staticClass:\"youtube-container\"},[_c('iframe',{staticClass:\"youtube-video\",attrs:{\"src\":\"https://www.youtube.com/embed/M1_5VaDYxK4\",\"frameborder\":\"0\",\"allow\":\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\"allowfullscreen\":\"\"}})])]),_c('div',{staticClass:\"main-text\"},[_c('p',[_vm._v(\"This app detects your hands on a live camera video. It is powered by the \"),_c('b',[_vm._v(\"Localizer\")]),_vm._v(\": a deep neural network for object detection.\")]),_c('p',[_vm._v(\"Popular algorithms like YOLO find axis-aligned or rotated bounding boxes, which is only a rough description of the object's location. In contrast, Localizer predicts accurate object coordinates and orientation. This data is essential, for example, in robotic applications, to plan precise motions and avoid collisions.\")]),_c('p',[_c('a',{attrs:{\"href\":\"https://github.com/ivan-alles/localizer\"}},[_vm._v(\"Get more\")]),_vm._v(\" on GitHub: source code, examples, hands-on python app.\")])]),_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.startDemo()}}},[_c('b-icon',{attrs:{\"icon\":\"camera-video\"}}),_vm._v(\" Start \")],1)]:_vm._e(),(_vm.state === _vm.stateKind.INIT)?[_c('h4',[_c('b-spinner',{attrs:{\"variant\":\"secondary\",\"label\":\"Loading\"}}),_vm._v(\" \"+_vm._s(_vm.progressMessage)+\" \")],1),(_vm.isMobile)?[_c('p',[_vm._v(\"Running this app on a mobile device can be slow or irresponsive. It works best on a desktop with an NVIDIA graphic card.\")])]:_vm._e()]:_vm._e(),(_vm.state === _vm.stateKind.WORKING)?[_c('div',{attrs:{\"id\":\"viewContainer\"}},[_c('canvas',{attrs:{\"id\":\"viewCanvas\"}}),(_vm.isVideoShown)?_c('b-button',{attrs:{\"variant\":\"secondary\",\"id\":\"stopDemoButton\"},on:{\"click\":function($event){return _vm.stopDemo()}}},[_c('b-icon',{attrs:{\"icon\":\"stop-fill\"}}),_vm._v(\" Quit \")],1):_vm._e()],1)]:_vm._e(),(_vm.state === _vm.stateKind.ERROR)?[_c('h4',{staticClass:\"error\"},[_c('b-icon',{attrs:{\"icon\":\"exclamation-circle-fill\",\"variant\":\"danger\"}}),_vm._v(\" Error \")],1),_c('p',[_vm._v(\" This app works best on a desktop with an NVIDIA graphic card. Other devices may not be supported. \")]),_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.reload()}}},[_c('b-icon',{attrs:{\"icon\":\"bootstrap-reboot\"}}),_vm._v(\" Reload \")],1),_c('b-button',{attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){_vm.showFatalError = true}}},[_vm._v(\" Details \")]),(_vm.showFatalError)?[_c('p',{staticClass:\"fatal-error-text\"},[_vm._v(_vm._s(this.fatalError))])]:_vm._e()]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright 2021 Ivan Alles. See also the LICENSE file. \r\n\r\n// eslint-disable no-unused-vars\r\n\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport {loadGraphModel} from '@tensorflow/tfjs-converter';\r\n\r\nlet MODEL_URL = '/prediction_model.tfjs/model.json';\r\nconst OBJECT_SIZE = 88;\r\n\r\n/**\r\n * Compute padding size to use in tf.pad().\r\n *\r\n * @param {number} size tensor axis size.\r\n * @param {number} padTo the resulting axis size must be divisible by this value.\r\n * @returns required padding size.\r\n */\r\nfunction padSize(size, padTo) {\r\n  if (size % padTo == 0)\r\n    return 0;\r\n  return padTo - size % padTo;\r\n}\r\n\r\n/**\r\n * Adapts input image for DNN computations.\r\n * \r\n * @param {tf.Tensor} image input image.\r\n * @param {number} maxSize maximal width or height.\r\n * @param {number} padTo the resulting width and height must be divisible by this value.\r\n * @returns {image, scale}. image is adapted for DNN, scale is its scale factor.\r\n */\r\nfunction makeInput(image, maxSize=511, padTo=32) {\r\n  let sizeX = image.shape[1];\r\n  let sizeY = image.shape[0];\r\n  const scaleX = maxSize / sizeX;\r\n  const scaleY = maxSize / sizeY;\r\n  let scale = 0;\r\n  if (scaleX < 1 || scaleY < 1) {\r\n    if (scaleX < scaleY) {\r\n      scale = scaleX;\r\n      sizeX = maxSize;\r\n      sizeY = Math.floor(sizeY * scale);\r\n    }\r\n    else {\r\n      scale = scaleY;\r\n      sizeX = Math.floor(sizeX * scale);\r\n      sizeY = maxSize;\r\n    }\r\n    // console.log('sizeX, sizeY', sizeX, sizeY);\r\n    image = tf.image.resizeBilinear(image, [sizeY, sizeX]);\r\n  }\r\n  const padX = padSize(sizeX, padTo);\r\n  const padY = padSize(sizeY, padTo);\r\n  if(padX != 0 || padY != 0) {\r\n    image = tf.pad(image, [[0, padY], [0, padX], [0, 0]])\r\n  }\r\n  // RGB -> BGR, add batch dimension.\r\n  image = tf.expandDims(tf.reverse(image, 2), 0);\r\n  return {\r\n    image,\r\n    scale\r\n  };  \r\n}\r\n\r\n/**\r\n * @class Localizer\r\n * Implementation of the Localizer prediction algorithm.\r\n */\r\nclass Localizer {\r\n  constructor(logger) {\r\n    this.logger = logger;\r\n  }\r\n\r\n\r\n  async init(maxInputSize, onProgress) {\r\n    this.maxInputSize = maxInputSize;\r\n    let url = MODEL_URL;\r\n    if (process.env.NODE_ENV === 'production' ) {\r\n      url = '/localizer' + url;      \r\n    }\r\n\r\n    console.log(`Loading model ${url} ...`)\r\n    this.model = await loadGraphModel(url, {onProgress: fraction => {\r\n      let progress = Math.round(fraction * 100);\r\n      onProgress(`Loading neural network: ${progress}%`);\r\n    }});\r\n    console.log(`Model loaded`);\r\n  }\r\n\r\n  /**\r\n   * Finds objects on the input image.\r\n   * @param {tf.Tensor} image input image.\r\n   * @returns {objects, objectSize}. objects is an array of object positions, objectSize is the size of the \r\n   * perceptive field of the neural network scaled to the input image size.\r\n   * @memberof Localizer\r\n   */\r\n  async predict(image) {\r\n    let input = null;\r\n    let output = null;\r\n    try {\r\n      // console.log('image', image);\r\n      input = tf.tidy(() => makeInput(image, this.maxInputSize, 32));\r\n      // console.log('input', input);\r\n      output = await this.model.executeAsync({'image': input.image});\r\n      // console.log('prediction', prediction);\r\n      const outputArray = await output.data();\r\n\r\n      const objects = [];\r\n\r\n      // Each object is a 5-tuple of x, y, angle, category, confidence\r\n      for(let i = 0; i < outputArray.length; i += 5) {\r\n        objects.push({\r\n          x: outputArray[i] * 8 / input.scale,\r\n          y: outputArray[i + 1] * 8 / input.scale,\r\n          angle: outputArray[i + 2]\r\n        });\r\n      }\r\n\r\n      return {\r\n        objects,\r\n        objectSize: OBJECT_SIZE / input.scale\r\n      }\r\n    }\r\n    catch(error) {\r\n      this.logger.logException('Localizer.predict', error);\r\n    }\r\n    finally {\r\n      if(input!==null) tf.dispose(input.image);\r\n      tf.dispose(output);\r\n    }\r\n    return null; \r\n  }\r\n}\r\n\r\n/**\r\n * Combines alogrithms to implement application logic.\r\n * Converts the data between UI (plain javascript data) to internal representations (tf.tensor).\r\n */\r\nexport class Engine {\r\n  constructor(logger) {\r\n    this.logger = logger;\r\n    this.initDone = false;\r\n  }\r\n\r\n  async init(maxInputSize, onProgress) {\r\n    if (this.initDone) {\r\n      console.log('Init already done')\r\n      return;\r\n    }\r\n\r\n    // Do tf initialization here, before any usage of it.\r\n    await tf.ready();\r\n\r\n    console.log('Initial tf.ENV.features', tf.ENV.features);\r\n    \r\n    // Switch off the convolution algo conv2dWithIm2Row() with very high memory requirements.\r\n    tf.ENV.set('WEBGL_CONV_IM2COL', false)\r\n\r\n    // Use 16-bit\r\n    tf.ENV.set('WEBGL_FORCE_F16_TEXTURES', true)\r\n    tf.ENV.set('WEBGL_RENDER_FLOAT32_ENABLED', false)\r\n\r\n    // Repeat just in case the settings above require some lengthy initialization.\r\n    await tf.ready();\r\n\r\n    console.log('New tf.ENV.features', tf.ENV.features);\r\n\r\n\r\n    if (process.env.NODE_ENV === 'production' ) {\r\n      console.log('Production mode');\r\n      tf.enableProdMode();\r\n    }\r\n    else {\r\n      console.log('Development mode');\r\n    }\r\n\r\n    this.localizer = new Localizer(this.logger);\r\n\r\n    await this.localizer.init(maxInputSize, onProgress);\r\n\r\n    this.initDone = true;\r\n  }\r\n\r\n  /**\r\n   * Finds objects on the browser image.\r\n   *\r\n   * @param {*} image browser image.\r\n   * @returns see Localizer.predict().\r\n   * @memberof Engine\r\n   */\r\n  async predict(image) {\r\n    // console.log('tf.memory', tf.memory());\r\n    let imageTensor = null;\r\n    try {\r\n      imageTensor = tf.tidy(() =>  \r\n        tf.div(tf.cast(tf.browser.fromPixels(image), 'float32'), 255));\r\n      return await this.localizer.predict(imageTensor);\r\n    }\r\n    finally {\r\n      tf.dispose(imageTensor);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// Export for tests only.\r\nexport const testables = {padSize, makeInput};","<!-- Copyright 2021 Ivan Alles. See also the LICENSE file. -->\r\n\r\n<template>\r\n  <b-container>\r\n    <template v-if=\"state === stateKind.WELCOME\">\r\n      <h1>Hand Detector</h1>\r\n      <h4>Localizer demo app</h4>\r\n      <div class='social-share'>\r\n        <ShareNetwork\r\n            network=\"Facebook\"\r\n            :url=\"shareUrl()\"\r\n            :title=\"shareTitle()\"\r\n          >\r\n          <b-button variant=\"secondary\">\r\n            <font-awesome-icon :icon=\"['fab', 'facebook']\" size=\"lg\" ></font-awesome-icon>\r\n          </b-button>\r\n        </ShareNetwork>\r\n        <!-- Twitter does not work with a local URL. -->\r\n        <ShareNetwork\r\n            network=\"Twitter\"\r\n            :url=\"shareUrl()\"\r\n            :title=\"shareTitle()\"\r\n          >\r\n          <b-button variant=\"secondary\">\r\n            <font-awesome-icon :icon=\"['fab', 'twitter']\" size=\"lg\" ></font-awesome-icon>\r\n          </b-button>\r\n        </ShareNetwork>         \r\n        <ShareNetwork\r\n            network=\"VK\"\r\n            :url=\"shareUrl()\"\r\n            :title=\"shareTitle()\"\r\n          >\r\n          <b-button variant=\"secondary\">\r\n            <font-awesome-icon :icon=\"['fab', 'vk']\" size=\"lg\" ></font-awesome-icon>\r\n          </b-button>\r\n        </ShareNetwork>   \r\n        <!-- The URL will be inserted as plain text, so add a line break and a short description. -->\r\n        <ShareNetwork\r\n            network=\"Email\"\r\n            :url=\"shareUrl()\"\r\n            :title=\"shareTitle()\"\r\n            description=\"Check out the localizer demo app.\"\r\n          >\r\n          <b-button variant=\"secondary\">\r\n            <b-icon icon=\"envelope\" ></b-icon>\r\n          </b-button>\r\n        </ShareNetwork>\r\n      </div>\r\n      <div class=\"youtube-super-container\">\r\n        <div class=\"youtube-container\">\r\n          <iframe class=\"youtube-video\" src=\"https://www.youtube.com/embed/M1_5VaDYxK4\" frameborder=\"0\" \r\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\r\n        </div>\r\n      </div>\r\n      <div class=\"main-text\">\r\n        <p>This app detects your hands on a live camera video. It is powered by the <b>Localizer</b>: a deep neural network for object detection.</p>\r\n\r\n        <p>Popular algorithms like YOLO find axis-aligned or rotated bounding boxes, which is only a rough description of the object's location. \r\n        In contrast, Localizer predicts accurate object coordinates and orientation. This data is essential, for example, in robotic applications, \r\n        to plan precise motions and avoid collisions.</p>\r\n\r\n        <p><a href=\"https://github.com/ivan-alles/localizer\">Get more</a> on GitHub: source code, examples, hands-on python app.</p>\r\n      </div>\r\n      <b-button @click=\"startDemo()\" variant=\"primary\">\r\n        <b-icon icon=\"camera-video\" ></b-icon>\r\n        Start\r\n      </b-button>\r\n    </template>  \r\n    <template v-if=\"state === stateKind.INIT\">\r\n      <h4>\r\n        <b-spinner variant=\"secondary\" label=\"Loading\"></b-spinner>\r\n        {{progressMessage}}\r\n      </h4>\r\n      <template v-if=\"isMobile\">\r\n        <p>Running this app on a mobile device can be slow or irresponsive. It works best on a desktop with an NVIDIA graphic card.</p>\r\n      </template>\r\n    </template>\r\n    <template v-if=\"state === stateKind.WORKING\">\r\n      <div id=\"viewContainer\">\r\n        <canvas id=\"viewCanvas\"></canvas>\r\n        <b-button v-if=\"isVideoShown\" @click=\"stopDemo()\" variant=\"secondary\" id=\"stopDemoButton\">\r\n          <b-icon icon=\"stop-fill\" ></b-icon>\r\n          Quit\r\n        </b-button>\r\n      </div>\r\n    </template>    \r\n    <template v-if=\"state === stateKind.ERROR\">\r\n      <!-- The practice have shown that in case of an error we cannot recover. Only reloading the page helps. -->\r\n      <h4 class=\"error\">\r\n        <b-icon icon=\"exclamation-circle-fill\" variant=\"danger\"></b-icon>\r\n        Error\r\n      </h4>\r\n      <p>\r\n      This app works best on a desktop with an NVIDIA graphic card. Other devices may not be supported.\r\n      </p>\r\n      <b-button @click=\"reload()\" variant=\"primary\">\r\n        <b-icon icon=\"bootstrap-reboot\"></b-icon>\r\n        Reload\r\n      </b-button>\r\n      <b-button @click=\"showFatalError = true\" variant=\"secondary\">\r\n        Details\r\n      </b-button>      \r\n      <template v-if=\"showFatalError\">\r\n        <p class='fatal-error-text'>{{this.fatalError}}</p>\r\n      </template>\r\n    </template>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { Engine } from '@/Engine'\r\n\r\n// Intervals in ms.\r\nconst HAND_ICON_OFF_INTERVAL = 5000;\r\nconst HAND_ICON_ON_INTERVAL = 2000;\r\n\r\nconst stateKind = {\r\n    WELCOME: 'WELCOME', // Welcome screen.\r\n    INIT: 'INIT',       // Loading models, etc.\r\n    WORKING: 'WORKING', // Detecting.\r\n    EXIT: 'EXIT',       // App finished.\r\n    ERROR: 'ERROR',     // Fatal error, cannot work.\r\n}\r\n\r\nclass Logger {\r\n  constructor(gtag) {\r\n    this.gtag = gtag;\r\n  }\r\n\r\n  log(category, action, label, value=1) {\r\n    console.log(category, action, label, value);\r\n    this.gtag.event({\r\n      eventCategory: category,\r\n      eventAction: action,\r\n      eventLabel: label,\r\n      eventValue: value\r\n    });\r\n  }\r\n\r\n  logException(action, exception, value=1) {\r\n    console.error(action, exception, value);\r\n    this.gtag.event({\r\n      eventCategory: 'LogError',\r\n      eventAction: action,\r\n      eventLabel: exception.stack,\r\n      eventValue: value\r\n    });    \r\n  }\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      state: stateKind.WELCOME,\r\n      isMobile: false,\r\n      progressMessage: 'Loading ...',\r\n      tempResultPicture: null,\r\n      camera: null,\r\n      isVideoReady: false,\r\n      isVideoShown: false,\r\n      isDetecting: false, // Processing a video frame by a DNN, ignore attempts to quit.\r\n      isHandIconOn: false,\r\n      handIconTime: new Date() - HAND_ICON_OFF_INTERVAL,\r\n      fatalError: '', // Information about the error triggered ERROR state.\r\n      showFatalError: false, \r\n    };\r\n  },\r\n  computed: {\r\n  },  \r\n\r\n  methods: {\r\n    /**\r\n    * Detects objects in the background.\r\n    */\r\n    async detectionTask() {\r\n      try {\r\n        this.isDetecting = false;\r\n        this.isVideoShown = false;\r\n\r\n        const maxInputSize = this.isMobile ? 256 : 512;\r\n        await this.engine.init(maxInputSize, message => {this.progressMessage = message;});\r\n        this.progressMessage = 'Warming up ...';\r\n\r\n        const handIcon = new Image();\r\n        let imageLoaded = false;\r\n        handIcon.onload = function() { imageLoaded = true; }\r\n        handIcon.src = 'hand.svg';\r\n        while(!imageLoaded) {\r\n          await sleep(50);\r\n        }        \r\n\r\n        while(!this.isVideoReady && this.state != stateKind.ERROR) {\r\n          await sleep(50);\r\n        }\r\n        console.log('isVideoReady state: ', this.isVideoReady);\r\n\r\n        if(this.state == stateKind.ERROR)\r\n          return; // Something went wrong elsewhere (e.g. camera video).\r\n\r\n        this.state = stateKind.WORKING;\r\n\r\n        for(;;) {\r\n          this.isDetecting = false;\r\n          await sleep(50);\r\n          if(!this.isActive) {\r\n            continue;\r\n          }\r\n          if (this.state != stateKind.WORKING) break;\r\n\r\n          this.isDetecting = true;\r\n\r\n          // Make this in the loop, as if phone screen orientation changes, video will resize.\r\n          const bufferCanvas = document.createElement('canvas');\r\n          bufferCanvas.setAttribute('width', this.camera.videoWidth);\r\n          bufferCanvas.setAttribute('height', this.camera.videoHeight);\r\n\r\n          const bufferContext = bufferCanvas.getContext(\"2d\");\r\n\r\n          // Flip camera image.\r\n          bufferContext.translate(bufferCanvas.width, 0);\r\n          bufferContext.scale(-1, 1);\r\n          bufferContext.drawImage(this.camera, 0, 0);\r\n          bufferContext.resetTransform();\r\n\r\n          const {objects, objectSize} = await this.engine.predict(bufferCanvas);\r\n\r\n          // console.log('getting viewCanvas');\r\n          const viewCanvas = document.getElementById('viewCanvas');\r\n          // Make View canvas fit the container and preserve the aspect ratio.\r\n          const viewContainer = document.getElementById('viewContainer');\r\n          const viewRect = viewContainer.getBoundingClientRect();\r\n          const fullWidth = viewRect.width;\r\n          const fullHeight = window.innerHeight - viewRect.y - 2;\r\n          const viewScaleX = fullWidth / bufferCanvas.width;\r\n          const viewScaleY = fullHeight / bufferCanvas.height;\r\n          let viewScale = 1;\r\n          if(viewScaleX < viewScaleY) {\r\n            viewCanvas.setAttribute('width', fullWidth);\r\n            viewCanvas.setAttribute('height', bufferCanvas.height * viewScaleX);\r\n            viewScale = viewScaleX;\r\n          }\r\n          else {\r\n            viewCanvas.setAttribute('height', fullHeight);\r\n            viewCanvas.setAttribute('width', bufferCanvas.width * viewScaleY);\r\n            viewScale = viewScaleY;\r\n          }\r\n\r\n          const viewContext = viewCanvas.getContext(\"2d\");\r\n          viewContext.drawImage(bufferCanvas, 0, 0, viewCanvas.width, viewCanvas.height);\r\n\r\n          const objScale = viewScale * objectSize / 2;\r\n\r\n          const currentTime = new Date();\r\n          if(this.isHandIconOn) {\r\n            if(currentTime - this.handIconTime > HAND_ICON_ON_INTERVAL || objects.length > 0) {\r\n              this.handIconTime = currentTime;\r\n              this.isHandIconOn = false;\r\n            }\r\n            else {\r\n              viewContext.drawImage(handIcon, \r\n                viewCanvas.width / 2 - objScale, viewCanvas.height / 2 - objScale, \r\n                2 * objScale, 2 * objScale);\r\n\r\n              viewContext.font = '24px arial';\r\n              viewContext.fillStyle = \"#0AAF0A\";\r\n              viewContext.textAlign = 'center';\r\n              viewContext.textBaseline = 'top';\r\n              viewContext.fillText('show me your hand', \r\n                viewCanvas.width / 2, \r\n                viewCanvas.height / 2 + objScale);\r\n            }\r\n          }\r\n          else if(currentTime - this.handIconTime > HAND_ICON_OFF_INTERVAL) {\r\n              this.handIconTime = currentTime;\r\n              this.isHandIconOn = true;\r\n          }\r\n\r\n          for(const o of objects) {\r\n            // console.log('object', o);\r\n            const sa = Math.sin(o.angle) * objScale;\r\n            const ca = Math.cos(o.angle) * objScale;\r\n            viewContext.setTransform(ca, sa, -sa, ca, o.x * viewScale, o.y * viewScale);\r\n            viewContext.beginPath();\r\n            viewContext.moveTo(0, 0);\r\n            viewContext.lineTo(1, 0);\r\n            viewContext.moveTo(1, 0);\r\n            viewContext.lineTo(0.8, -0.15);\r\n            viewContext.moveTo(1, 0);\r\n            viewContext.lineTo(0.8, 0.15);\r\n            viewContext.arc(0, 0, 1, 0, 2 * Math.PI);\r\n            viewContext.resetTransform();\r\n            viewContext.lineWidth = 3;\r\n            viewContext.strokeStyle = \"#0AAF0A\";\r\n            viewContext.stroke();\r\n          }\r\n\r\n          this.isVideoShown = true;\r\n        }\r\n      }\r\n      catch(error) {\r\n        this.logger.logException('Main.detectionTask.createPictures', error);\r\n        this.fatalError = error.stack;\r\n        if (this.state != stateKind.WELCOME) this.state = stateKind.ERROR;\r\n      }\r\n      this.isDetecting = false;\r\n    },\r\n\r\n    reload() {\r\n      location.reload();\r\n    },\r\n\r\n    startDemo() {\r\n      this.state = stateKind.INIT;\r\n      this.startVideo();\r\n      this.detectionTask();\r\n    },\r\n\r\n    async stopDemo() {\r\n      while(this.state == stateKind.WORKING && this.isDetecting) {\r\n        await sleep(50);\r\n      }\r\n      this.state = stateKind.WELCOME;\r\n    },\r\n\r\n    onVideoReady() {\r\n      console.log('Video ready.');\r\n      this.isVideoReady = true;\r\n    },\r\n\r\n    onVideoError() {\r\n      this.logger.logException('Images.onVideoError', this.camera.error.message);\r\n      this.isVideoReady = false;\r\n      this.fatalError = this.camera.error.message;\r\n      this.state = stateKind.ERROR;\r\n    },\r\n\r\n    async startVideo() {\r\n      try {\r\n        if (this.camera !== null) {\r\n          // Camera is already opened by a previous call.\r\n          return;\r\n        }\r\n\r\n        this.camera = document.createElement(\"video\");\r\n        if (navigator.mediaDevices.getUserMedia) {\r\n          this.camera.srcObject = await navigator.mediaDevices.getUserMedia({ video: true });\r\n        }\r\n        this.camera.onloadeddata = this.onVideoReady;\r\n        this.camera.play();\r\n      }\r\n      catch(error) {\r\n        this.logger.logException('Images.startVideo', error);\r\n        this.fatalError = error.stack;\r\n        this.state = stateKind.ERROR;\r\n      }\r\n    },    \r\n\r\n    shareUrl() {\r\n      return window.location.href;\r\n    },\r\n\r\n    shareTitle() {\r\n      return 'Hand Detector';\r\n    },\r\n  },\r\n\r\n  created() {\r\n    // Make globals accessible in Vue rendering code\r\n    this.stateKind = stateKind;\r\n    this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n    // TODO(ia): this is just a test of gtag, remove in future.\r\n    this.$gtag.event('test_event', { method: 'Google' }); \r\n    this.logger = new Logger(this.$gtag);\r\n    // TODO(ia): this is just a test of gtag logger, remove in future.\r\n    this.logger.log('test category', 'test action', 'test label', 123);\r\n    this.isActive = true;\r\n    this.engine = new Engine(this.logger);\r\n  },\r\n\r\n  mounted() {\r\n  },\r\n\r\n  beforeDestroy () {\r\n    this.state = stateKind.EXIT;\r\n  },\r\n\r\n  updated() {\r\n  },\r\n\r\n  watch: {\r\n    $route(to, from) { // eslint-disable-line\r\n      // Activate this component when the router points to it.\r\n      this.isActive = to.name === 'Home';\r\n    }\r\n  },\r\n\r\n};\r\n\r\nfunction sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n#viewContainer {\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  width: 100%;\r\n}\r\n\r\n#viewCanvas {\r\n  z-index: -1;\r\n}\r\n\r\n#stopDemoButton {\r\n  position: absolute;\r\n  top: 1px;\r\n  left: 1px;\r\n}\r\n\r\n.error {\r\n  color: var(--danger);\r\n}\r\n\r\n.social-share {\r\n  margin: 0 0 10px 0;\r\n}\r\n\r\n/* Limit youtube iframe width on large screen. */\r\n.youtube-super-container {\r\n    max-width: 560px;\r\n}\r\n\r\n/* Responsive youtube iframe, see https://www.h3xed.com/web-development/how-to-make-a-responsive-100-width-youtube-iframe-embed */\r\n.youtube-container {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-bottom: 56.25%;\r\n}\r\n\r\n.youtube-video {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.fatal-error-text {\r\n  margin: 10px 0 0 0;\r\n}\r\n\r\n.main-text {\r\n  margin: 10px 0 0 0;\r\n}\r\n\r\nbutton {\r\n  margin: 0 0.5rem 0 0;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=bc46e4f2&scoped=true&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&id=bc46e4f2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc46e4f2\",\n  null\n  \n)\n\nexport default component.exports","<!-- Copyright 2021 Ivan Alles. See also the LICENSE file. -->\n\n<template>\n  <div class=\"home\">\n    <Main msg=\"Object Localization With Orientation\"/>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport Main from '@/components/Main.vue'\n\nexport default {\n  name: 'Home',\n  components: {\n    Main\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=051f5c7e&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Copyright 2021 Ivan Alles. See also the LICENSE file.\n\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport { BootstrapVue, IconsPlugin, FormInputPlugin } from 'bootstrap-vue'\nimport VueSocialSharing from 'vue-social-sharing'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\nimport { faVk, faFacebook, faTwitter } from '@fortawesome/free-brands-svg-icons'\n\nimport Home from '../views/Home.vue'\n\nimport '../custom.scss'\n\nlibrary.add(faVk)\nlibrary.add(faFacebook)\nlibrary.add(faTwitter)\nVue.component('font-awesome-icon', FontAwesomeIcon)\n\nVue.use(BootstrapVue)\nVue.use(IconsPlugin)\nVue.use(FormInputPlugin)\nVue.use(VueRouter)\nVue.use(VueSocialSharing)\n\n  const routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nexport default router\n","// Copyright 2021 Ivan Alles. See also the LICENSE file. \n\nimport Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport VueGtag from 'vue-gtag'\n\n\nVue.config.productionTip = false\n\nVue.use(VueGtag, {\n    config: { id: 'G-VMZBN6EQSD' }\n})\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=bc46e4f2&scoped=true&lang=css&\""],"sourceRoot":""}